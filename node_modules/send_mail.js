
  const nodemailer = require('nodemailer');
const { callbackPromise } = require('nodemailer/lib/shared');

  function send_mail(gmail,gpass,From,To,Subject,message,callback)
  {

    const transporter = nodemailer.createTransport({
        service: 'gmail',
        auth: {
            user: gmail, // 'saksphosri@gmail.com', // your email
            pass: gpass//'iBorn2B1.' // your email password
        }
      });
    
      /*
    var data ='<b>แจ้งดูแลบำรุงรักษา</b>' + '<br>';
    data +='<b>แจ้งซ่อม</b>' + '<br>';
    data +='<b>ขอคำปรึกษาด้านเทคนิค</b>' + '<br>';
    */
    
      let mailOptions = {
        from: From,//'saksphosri@gmail.com',                // sender
        to: To,//'saksphosri@gmail.com',                // list of receivers
        subject: Subject,//'แจ้งดูแลบำรุงรักษาเครื่องจักร',              // Mail subject
        html: message  // HTML body
    
      };
    
      // send mail with defined transport object
    transporter.sendMail(mailOptions, function (err, info) {
        if(err)
        {
            console.log(err)
            callback(err);
            return;
        }
        else
        {
            callback(info);
            return;
            console.log(info);
        }
          
          
        
     });

  }

exports.send_mail = send_mail;
 